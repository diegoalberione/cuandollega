<div class="panel panel-default">
	<div class="panel-heading" id="divBusquedaCalleTitulo">
		Búsqueda por calle - Seleccione la calle
	</div>
	<div class="panel-body" id="divBusqueda">
		<div class="form-group">
			<input id="inputCalle" class="form-control" placeholder="Ingrese la calle" onkeyup="buscarCalles()" />
		</div>
		<div id="divResultadoCalle">
		</div>
	</div>
</div>
<script>
var paso = 1;

function buscarCalles(){
	if ($('#inputCalle').val().length > 1){
		$('#divResultadoCalle').html('...');
		$.getJSON( urlHost+"/ws/calles/json_combo?q="+$('#inputCalle').val(), function( data ) {
			$('#divResultadoCalle').html('');
			for (var i=0; i<data.items.length; i++){
				var html = '<div class="panel panel-default" onclick="seleccionCalle(\''+data.items[i].id+'\')" style="margin:3px;"><div class="panel-body">';
				html += '<div class="col-xs-9">'+data.items[i].text+'</div>';
				html += '<div class="col-xs-3"><i class="fa fa-search"></i></div>';
				html += '</div></div>';
				$('#divResultadoCalle').append(html);
			}			
		});
	}
}

function seleccionCalle(codcalle){
	if (paso == 1){
		paradaBusqueda = []; // limpia la variable
		paradaBusqueda.codcalle = codcalle;
		paso = 2;
		$('#inputCalle').val('');
		$('#divResultadoCalle').html('');
		$('#divBusquedaCalleTitulo').html('Búsqueda por calle - Seleccione intersección');
	} else if (paso == 2){
		paradaBusqueda.codcalleint = codcalle;
		$("#divContenido").load('./resultado.html');
	}
}
</script>